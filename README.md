![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)  ![Django](https://img.shields.io/badge/django-%23092E20.svg?style=for-the-badge&logo=django&logoColor=white)  ![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white)  ![Nginx](https://img.shields.io/badge/nginx-%23009639.svg?style=for-the-badge&logo=nginx&logoColor=white)  ![Gunicorn](https://img.shields.io/badge/gunicorn-%298729.svg?style=for-the-badge&logo=gunicorn&logoColor=white)  ![GitHub Actions](https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white)  ![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)


# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–∏—Ö –∑–∞–¥–∞—á

## –î–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞ Taski –≤ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö** –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –±—ç–∫–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ **Django** –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ **React**. 

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞: 

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –Ω–∞ —Å–∞–π—Ç –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ –∑–∞–¥–∞—á–∏ –≤ –¥–≤—É—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö: –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ (Complete) –∏ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ (Incomplete).


–ü—Ä–æ–µ–∫—Ç Taski —Ä–∞–∑–º–µ—â—ë–Ω –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.
–í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –±—ç–∫–µ–Ω–¥–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω **WSGI-—Å–µ—Ä–≤–µ—Ä Gunicorn** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±—ç–∫–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞, –≤–æ –≤—Ç–æ—Ä–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫ –∂–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä **Nginx** –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç–∞—Ç–∏–∫–æ–π –ø—Ä–æ–µ–∫—Ç–∞. –ù–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É **HTTPS**.


### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD

–î–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ CI/CD —Å –ø–æ–º–æ—â—å—é GitHub Actions, –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–Ω workflow, –≤ –∫–æ—Ç–æ—Ä–æ–º:

* –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–¥ –±—ç–∫–µ–Ω–¥–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PEP8;
* –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞;
* –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –æ–±—Ä–∞–∑—ã –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –Ω–∞ Docker Hub;
* –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –æ–±—Ä–∞–∑—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ Docker Compose;
* –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ —Å—Ç–∞—Ç–∏–∫–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±—ç–∫–µ–Ω–¥–∞, –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç–∞—Ç–∏–∫–∏ –≤ volume; –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏–∏;
* –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –æ–± —É—Å–ø–µ—à–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –¥–µ–ø–ª–æ—è.

–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω–æ–≥–æ workflow —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Ñ–∞–π–ª–µ taski_workflow.yml –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–µ–ø–∏—à–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –≤ .github/workflows/main.yml.

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö GitHub Actions:

```
DOCKER_USERNAME - –ª–æ–≥–∏–Ω –≤ Docker Hub
DOCKER_PASSWORD - –ø–∞—Ä–æ–ª—å –¥–ª—è Docker Hub
SSH_KEY - –∑–∞–∫—Ä—ã—Ç—ã–π SSH-–∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å–µ—Ä–≤–µ—Ä—É
SSH_PASSPHRASE - passphrase –¥–ª—è —ç—Ç–æ–≥–æ –∫–ª—é—á–∞
USER - username –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å–µ—Ä–≤–µ—Ä—É
HOST - –∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å–µ—Ä–≤–µ—Ä—É
TELEGRAM_TO - ID —Å–≤–æ–µ–≥–æ —Ç–µ–ª–µ–≥—Ä–∞–º-–∞–∫–∫–∞—É–Ω—Ç–∞
TELEGRAM_TOKEN - —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
```

–§–∞–π–ª docker-compose.yml –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ñ–∞–π–ª docker-compose.production.yml –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –æ–±–ª–∞—á–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.


### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.9
- Django 3.2.3
- Django REST framework 3.12.4
- PostgreSQL
- Docker
- Nginx
- Gunicorn
- GitHub Actions


### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ dev-—Ä–µ–∂–∏–º–µ

–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–µ–≥–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ: 
```
git clone git@github.com:miscanth/taski-docker.git
```
C–æ–∑–¥–∞—Ç—å –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ: 
```
python3.9 -m venv venv 
```
* –ï—Å–ª–∏ —É –≤–∞—Å Linux/macOS 

    ```
    source venv/bin/activate
    ```
* –ï—Å–ª–∏ —É –≤–∞—Å windows 
 
    ```
    source venv/scripts/activate
    ```
```
python3.9 -m pip install --upgrade pip
```
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ requirements.txt:
```
pip install -r requirements.txt
```
–ó–∞–¥–∞–π—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ë–î –≤ .env —Ñ–∞–π–ª–µ, –∏—Å–ø–æ–ª—å–∑—É—è .env.example:
```
POSTGRES_USER=–ª–æ–≥–∏–Ω
POSTGRES_PASSWORD=–ø–∞—Ä–æ–ª—å
POSTGRES_DB=–Ω–∞–∑–≤–∞–Ω–∏–µ –ë–î
DB_HOST=–Ω–∞–∑–≤–∞–Ω–∏–µ —Ö–æ—Å—Ç–∞
DB_PORT=5432
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Compose —Å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π (docker-compose.yml):**

* –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–±–æ—Ä–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: *sudo docker compose up -d --build*

* –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏: *sudo docker compose exec backend python manage.py migrate*

* –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: *sudo docker compose exec backend python manage.py createsuperuser*

* –°–æ–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã —Å—Ç–∞—Ç–∏–∫–∏: *sudo docker compose exec backend python manage.py collectstatic*

* –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã —Å—Ç–∞—Ç–∏–∫–∏ –≤ /backend_static/static/ backend-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: *sudo docker compose exec backend cp -r /app/collected_static/. /backend_static/static/*

* –ü–µ—Ä–µ–π—Ç–∏ –ø–æ –∞–¥—Ä–µ—Å—É 127.0.0.1:8000


## –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å):
üë©üèº‚Äçüíª –Æ–ª–∏—è: https://github.com/miscanth